{% for method in methods %}
[UnmanagedCallersOnly(EntryPoint = "{{ method.nativeName }}", CallConvs = new[] { typeof(CallConvCdecl) })]
public static {{ method.returnType }} {{ method.managedName }}({{ method.methodParameters | join: ", " }})
{
    {% if method.isStaticMethod == false %}var {{ method.targetObjectName }} = UnboxHandle<{{ method.targetObjectType }}>({{ method.targetObjectParameterName }});{% endif %}
    {% if method.shouldFreeTarget %}FreeHandle({{ method.targetObjectParameterName }});{%- endif %}

    {%- capture targetCall -%}
        {{ method.targetObjectName }}.{{ method.apiName }}({{ method.targetMethodParameters | join: ", " }})
    {%- endcapture -%}

{% if method.returnType == "void" %}
    {{ targetCall }};
{%- else %}
    var result = {{ targetCall }};
    return {{ method.resultTransformFunction }}(result);
{%- endif %}
}
{% endfor %}